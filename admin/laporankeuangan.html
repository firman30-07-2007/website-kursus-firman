<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Laporan Keuangan SPP</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif}
    body{min-height:100vh;background:#f8fafc;color:#0f172a;display:flex;overflow-x:hidden;}

    /* Sidebar */
    .sidebar{
      width:250px;
      background:linear-gradient(180deg,#7c3aed,#06b6d4);
      color:#fff;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      position:fixed;
      top:0;left:0;bottom:0;
      box-shadow:2px 0 20px rgba(0,0,0,0.1);
    }
    .logo{padding:24px 20px;font-weight:700;font-size:20px;display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.08);}
    nav{display:flex;flex-direction:column;padding:20px;}
    nav a{padding:12px 16px;border-radius:10px;color:#f1f5f9;font-weight:500;transition:.2s;display:flex;align-items:center;gap:10px;}
    nav a:hover,nav a.active{background:rgba(255,255,255,0.15);color:#fff;}
    .bottom{padding:20px;border-top:1px solid rgba(255,255,255,0.2);}
    .bottom a{color:#f87171;font-weight:600;text-decoration:none;display:block;text-align:center;}

    /* Main */
    main{
      margin-left:250px;
      flex:1;
      padding:24px;
      display:flex;
      flex-direction:column;
      gap:24px;
      transition:margin-left 0.3s;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:#fff;
      padding:14px 20px;
      border-radius:12px;
      box-shadow:0 2px 10px rgba(0,0,0,0.05);
    }
    header h1{font-size:20px;}
    .menu-btn{display:none;background:transparent;border:none;font-size:22px;cursor:pointer;}

    /* Filter Bar */
    .filter-bar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
    }
    .filter-group{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    input[type="date"],input[type="text"]{
      padding:8px 12px;
      border:1px solid #cbd5e1;
      border-radius:10px;
      font-size:14px;
    }
    .btn-filter{
      background:linear-gradient(90deg,#7c3aed,#06b6d4);
      border:none;
      color:#fff;
      padding:9px 14px;
      font-weight:600;
      border-radius:10px;
      cursor:pointer;
      transition:.2s;
      box-shadow:0 4px 12px rgba(99,102,241,0.2);
    }
    .btn-filter:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(99,102,241,0.25);}

    /* Table */
    .table-wrap{
      background:#fff;
      border-radius:14px;
      padding:20px;
      box-shadow:0 3px 14px rgba(0,0,0,0.06);
      overflow:auto;
    }
    table{width:100%;border-collapse:collapse;min-width:750px;}
    th,td{text-align:left;padding:12px 10px;}
    th{background:#f1f5f9;color:#334155;font-size:14px;}
    tr:nth-child(even){background:#f9fafb;}
    td{font-size:14px;color:#0f172a;}
    tfoot td{font-weight:700;background:#eef2ff;}

    /* Status badge */
    .status-lunas{
      background:#22c55e;
      color:#fff;
      padding:4px 8px;
      border-radius:8px;
      font-size:12px;
      font-weight:600;
    }
    .status-belum{
      background:#f97316;
      color:#fff;
      padding:4px 8px;
      border-radius:8px;
      font-size:12px;
      font-weight:600;
    }

    /* Responsive */
    @media(max-width:768px){
      .sidebar{position:fixed;left:-250px;transition:0.3s;}
      .sidebar.open{left:0;}
      main{margin-left:0;}
      .menu-btn{display:block;}
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div>
      <div class="logo"><span>SPP Admin</span></div>
      <nav>
       <a href="Home_admin.php" class="active">Dashboard</a>
        <a href="datasiswa.html">Data Siswa</a>
        <a href="laporankeuangan.html">laporan keungan</a>
        <a href="riwayat_pendaftaran.html">Riwayat Pendaftaran</a>
        <a href="tabunggan.html">Riwayat SPP Siswa</a>
      </nav>
    </div>
    <div class="bottom">
      <a href="file:///C:/xampp/htdocs/projekpkl/logout.html">Logout</a>
    </div>
  </aside>

  <!-- Main -->
  <main>
    <header>
      <button class="menu-btn" id="menuBtn">â˜°</button>
      <h1>Laporan Keuangan SPP</h1>
    </header>

    <div class="filter-bar">
      <div class="filter-group">
        <input type="text" id="searchName" placeholder="Cari nama siswa...">
        <input type="date" id="fromDate">
        <button class="btn-filter" id="btnFilter">Filter</button>
      </div>
    </div>

    <section class="table-wrap">
      <table id="tabelLaporan">
        <thead>
          <tr>
            <th>No</th>
            <th>Tanggal</th>
            <th>Nama Siswa</th>
            <th>Kelas</th>
            <th>Nominal</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>2025-10-01</td>
            <td>Rafi Pratama</td>
            <td>XII RPL 1</td>
            <td>250000</td>
            <td><span class="status-lunas">Lunas</span></td>
          </tr>
          <tr>
            <td>2</td>
            <td>2025-10-02</td>
            <td>Aulia Rahma</td>
            <td>X RPL 2</td>
            <td>250000</td>
            <td><span class="status-lunas">Lunas</span></td>
          </tr>
          <tr>
            <td>3</td>
            <td>2025-10-03</td>
            <td>Dika Setiawan</td>
            <td>XI RPL 1</td>
            <td>275000</td>
            <td><span class="status-belum">Belum</span></td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4">Total Pemasukan</td>
            <td colspan="2" id="totalCell">Rp 500.000</td>
          </tr>
        </tfoot>
      </table>
    </section>
  </main>

  <script>
    const sidebar=document.getElementById("sidebar");
    const menuBtn=document.getElementById("menuBtn");
    menuBtn.addEventListener("click",()=>sidebar.classList.toggle("open"));

    const searchName=document.getElementById("searchName");
    const fromDate=document.getElementById("fromDate");
    const toDate=document.getElementById("toDate");
    const btnFilter=document.getElementById("btnFilter");
    const tableBody=document.querySelector("#tabelLaporan tbody");
    const totalCell=document.getElementById("totalCell");

    function formatRupiah(angka){return "Rp "+angka.toLocaleString("id-ID");}

    function hitungTotal(){
      let total=0;
      for(let row of tableBody.rows){
        const status=row.cells[5].innerText.trim();
        if(status==="Lunas"){
          total+=parseInt(row.cells[4].innerText);
        }
      }
      totalCell.textContent=formatRupiah(total);
    }
    hitungTotal();

    btnFilter.addEventListener("click",()=>{
      const nameFilter=searchName.value.toLowerCase();
      const from=fromDate.value?new Date(fromDate.value):null;
      const to=toDate.value?new Date(toDate.value):null;

      for(let row of tableBody.rows){
        const nama=row.cells[2].textContent.toLowerCase();
        const tanggal=new Date(row.cells[1].textContent);
        const cocokNama=nama.includes(nameFilter);
        const cocokTanggal=(!from||tanggal>=from)&&(!to||tanggal<=to);
        row.style.display=(cocokNama&&cocokTanggal)?"":"none";
      }
      hitungTotal();
    });
  </script>

</body>
</html>